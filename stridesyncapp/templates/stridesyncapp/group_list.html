{% extends 'stridesyncapp/base.html' %}

{% block title %}Groups{% endblock %}

{% block content %}
    <div style="display:flex; justify-content:space-between; align-items:center;">
        <h1>Groups</h1>
        <a href="{% url 'group_create' %}" class="btn btn-add">Create New Group</a>
    </div>

    {% if groups %}
        <div class="group-grid">
            {% for group in groups %}
                <div class="group-card">
                    <h3><a href="{% url 'group_detail' group.pk %}">{{ group.name }}</a></h3>
                    
                    <p>Created by <strong>{{ group.created_by.username }}</strong></p>
                    <p>{{ group.members.count }} member{{ group.members.count|pluralize }}</p>

                    <div class="actions">
                        <a href="{% url 'group_detail' group.pk %}" class="btn btn-edit">View</a>
                        
                        {% if request.user == group.created_by or request.user.is_admin %}
                            <a href="{% url 'group_edit'   group.pk %}" class="btn btn-edit">Edit</a>
                            <a href="{% url 'group_delete' group.pk %}" class="btn btn-delete">Delete</a>
                        {% endif %}
                    </div>
                </div>
            {% endfor %}
            </div>

        {% else %}

        <p style="font-style:italic; color:#777; margin-top:20px;">
            No groups found. <a href="{% url 'group_create' %}" class="btn btn-add">Start one now</a>.
        </p>
    {% endif %}
{% endblock %}